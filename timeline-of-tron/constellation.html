<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Constellation — Timeline of Tron</title>
    <meta name="description" content="124 people across 22 years. An interactive star map of who connects to whom.">
    <meta property="og:title" content="The Constellation — Timeline of Tron">
    <meta property="og:description" content="124 people across 22 years. An interactive star map of who connects to whom.">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/constellation.css">
</head>
<body class="room-constellation">
    <div id="lj-header-mount"></div>

    <main class="constellation-container">
        <!-- Featured People Cards -->
        <div id="featuredMount" class="featured-mount"></div>

        <!-- Search -->
        <div class="constellation-search">
            <input type="search" placeholder="Search for a person..." aria-label="Search people" autocomplete="off">
        </div>

        <!-- Filters + Legend -->
        <div id="filtersMount" class="filters-mount"></div>

        <!-- Life Chapter Timeline -->
        <div id="chapterMount" class="chapter-mount"></div>

        <!-- Stats -->
        <div id="statsMount" class="stats-bar"></div>

        <!-- D3 force simulation renders here -->
        <div class="constellation-sky" id="constellationMount">
            <!-- Edge relationship panel (floating, positioned over graph) -->
            <div id="edgePanel" class="edge-panel"></div>
        </div>

        <!-- Person detail sidebar (content built dynamically by JS) -->
        <aside class="constellation-sidebar" id="personPanel"></aside>
    </main>

    <!-- Annotation -->
    <p class="constellation-annotation">
        Some people are so woven into the fabric that the fabric forgets to name them.
    </p>

    <!-- Network Over Time -->
    <section class="network-over-time">
        <h2>The Network Over Time</h2>
        <p class="network-subtitle">How John's circle grew, shifted, and evolved — year by year</p>
        <canvas id="networkChart"></canvas>
        <div class="network-legend" id="networkLegend"></div>
    </section>

    <!-- Advanced Analytics: Network Health + Community Detection + Deep Metrics -->
    <section class="advanced-metrics" id="advancedAnalytics">
        <h2 class="metrics-section-title">Network Intelligence</h2>
        <p class="metrics-section-subtitle">Graph theory meets personal history — PageRank, community detection, and relationship decay analysis</p>
        <div id="networkHealthMount" class="network-health"></div>
        <div id="metricsGridMount" class="metrics-grid"></div>
        <div id="communitiesMount" class="communities-section"></div>
    </section>

    <!-- Temporal Diversity Chart -->
    <section class="temporal-diversity" id="temporalDiversity">
        <h3>Network Diversity Over Time</h3>
        <p class="network-subtitle">Shannon entropy of relationship categories — how varied the circle was each year</p>
        <canvas id="diversityChart"></canvas>
    </section>

    <!-- Network Insights (enhanced) -->
    <section class="network-insights" id="networkInsights"></section>

    <div id="lj-footer-mount"></div>

    <script src="lib/d3.min.js"></script>
    <script src="lib/chart.js"></script>
    <script src="lib/fuse.min.js"></script>
    <script type="module">
        import { initNav } from './js/nav.js';
        import './js/search.js';
        initNav({
            room: 'constellation',
            mood: 'contemplative',
            music: 'Coldplay — "The Scientist"',
            subtitle: 'The People'
        });
    </script>
    <script type="module" src="js/constellation.js"></script>
</body>
</html>
