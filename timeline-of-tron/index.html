<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Timeline of Tron</title>
    <meta name="description" content="22 years. 226 milestones. One obsessively documented life. A data autobiography told through seven rooms.">
    <meta property="og:title" content="The Timeline of Tron">
    <meta property="og:description" content="22 years. 226 milestones. One obsessively documented life.">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/lobby.css">
</head>
<body class="room-lobby">

    <!-- LJ Header (injected by nav.js) -->
    <div id="lj-header-mount"></div>

    <main class="lobby">

        <!-- Hero: Journal Opening -->
        <section class="lobby-hero">
            <div class="hero-datestamp">
                <span class="datestamp-entry">Entry #226</span>
                <span class="datestamp-sep">&middot;</span>
                <span class="datestamp-date">February 2026</span>
            </div>
            <h1 class="lobby-title">The Timeline of Tron</h1>
            <p class="lobby-subtitle">22 years. 226 milestones. One obsessively documented life.</p>
            <div class="hero-rotating" id="hero-rotating">
                <span class="rotating-stat" id="rotating-stat"></span>
            </div>
        </section>

        <!-- The Seismograph: Full Centerpiece -->
        <section class="lobby-seismograph">
            <p class="seismograph-label-top">The shape of a life, 2004&ndash;2026</p>
            <div class="seismograph-container">
                <canvas id="seismograph"></canvas>
            </div>
            <p class="seismograph-hint">hover for details</p>
        </section>

        <!-- From the Archive -->
        <section class="lobby-archive" id="lobby-archive">
            <div class="archive-entry" id="archive-entry">
                <!-- Populated by JS: random quote or milestone -->
            </div>
        </section>

        <!-- Room Cards as Journal Entries -->
        <section class="lobby-rooms">
            <h2 class="lobby-rooms-title">Choose Your Lens</h2>
            <div class="room-grid">

                <a href="arc.html" class="room-card room-card--arc">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x1F4D6;</span>
                            <h3>The Arc</h3>
                        </div>
                        <p class="room-card__desc">The hero's journey from 2004 to now &mdash; 19 chapters, every turning point.</p>
                        <div class="room-card__teaser" id="teaser-arc"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: cinematic</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

                <a href="constellation.html" class="room-card room-card--constellation">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x2728;</span>
                            <h3>The Constellation</h3>
                        </div>
                        <p class="room-card__desc">162 people across 22 years. Who connects to whom, and when they mattered.</p>
                        <div class="room-card__teaser" id="teaser-constellation"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: contemplative</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

                <a href="records.html" class="room-card room-card--records">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x1F3C6;</span>
                            <h3>The Record Book</h3>
                        </div>
                        <p class="room-card__desc">Every number measured to the decimal. Because the precision is the point.</p>
                        <div class="room-card__teaser" id="teaser-records"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: proud</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

                <a href="atlas.html" class="room-card room-card--atlas">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x1F30D;</span>
                            <h3>The Atlas</h3>
                        </div>
                        <p class="room-card__desc">34 trips. 27+ countries. 5 continents. Recovery written in boarding passes.</p>
                        <div class="room-card__teaser" id="teaser-atlas"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: wandering</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

                <a href="vault.html" class="room-card room-card--vault">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x1F4AC;</span>
                            <h3>The Vault</h3>
                        </div>
                        <p class="room-card__desc">79 quotes. 22 years of evolving voice. What was said, and what it meant.</p>
                        <div class="room-card__teaser" id="teaser-vault"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: intimate</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

                <a href="dynasty.html" class="room-card room-card--dynasty">
                    <div class="room-card__accent"></div>
                    <div class="room-card__body">
                        <div class="room-card__header">
                            <span class="room-card__icon">&#x1F451;</span>
                            <h3>The Dynasty</h3>
                        </div>
                        <p class="room-card__desc">Career. Awards. Dodgeball. What was built and what endured.</p>
                        <div class="room-card__teaser" id="teaser-dynasty"></div>
                        <div class="room-card__footer">
                            <span class="room-card__mood">Current Mood: accomplished</span>
                            <span class="room-card__cut">(expand &mdash; lj-cut)</span>
                        </div>
                    </div>
                </a>

            </div>
        </section>

        <!-- Friend Voices -->
        <section class="lobby-voices">
            <h2 class="lobby-voices-title">What They Said</h2>
            <p class="lobby-voices-subtitle">Comments from the LiveJournal posts, 2007&ndash;2021</p>
            <div class="voices-grid" id="voices-grid"></div>
        </section>

    </main>

    <!-- LJ Footer (injected by nav.js) -->
    <div id="lj-footer-mount"></div>

    <script src="lib/fuse.min.js"></script>
    <script type="module">
        import { initNav } from './js/nav.js';
        import { checkRoom0Reveal } from './js/room0.js';
        import { loadData } from './js/data-loader.js';
        import './js/search.js';
        import './js/seismograph.js';

        initNav({
            room: 'lobby',
            mood: 'nostalgic',
            music: 'Janet Jackson \u2014 "All For You"',
            subtitle: 'To Tokyo, 2026.'
        });

        checkRoom0Reveal();

        // ============================================================
        // ROTATING HERO STATS
        // ============================================================
        const STATS = [
            '91 WWE events \u00b7 29-year Survivor Series streak',
            '27+ countries \u00b7 5 continents \u00b7 34 trips',
            '93.9% table tennis win rate \u00b7 218 rounds in one match',
            '162 people documented across the full arc',
            '14 medical events \u00b7 100% comeback rate',
            '8.6 lbs of shrimp \u00b7 consumed at one event',
            '19 life chapters \u00b7 13 turning points',
            '79 quotes spanning 22 years of evolving voice',
            '254 cornhole wins \u00b7 38 cornholios in one season',
            '27 bowling games in a single day'
        ];
        const rotatingEl = document.getElementById('rotating-stat');
        if (rotatingEl) {
            let statIdx = Math.floor(Math.random() * STATS.length);
            rotatingEl.textContent = STATS[statIdx];
            rotatingEl.style.opacity = '1';

            setInterval(() => {
                rotatingEl.style.opacity = '0';
                setTimeout(() => {
                    statIdx = (statIdx + 1) % STATS.length;
                    rotatingEl.textContent = STATS[statIdx];
                    rotatingEl.style.opacity = '1';
                }, 600);
            }, 4500);
        }

        // ============================================================
        // FROM THE ARCHIVE: Random quote
        // ============================================================
        loadData('quotes.json').then(quotes => {
            const el = document.getElementById('archive-entry');
            if (!el || !quotes || !quotes.length) return;

            const good = quotes.filter(q => q.quote && q.quote.length > 15 && q.quote.length < 120);
            if (!good.length) return;
            const pick = good[Math.floor(Math.random() * good.length)];

            el.innerHTML = `
                <div class="archive-label">From the Archive</div>
                <blockquote class="archive-quote">&ldquo;${pick.quote}&rdquo;</blockquote>
                <div class="archive-meta">
                    <span class="archive-context">${pick.context || ''}</span>
                    <span class="archive-year">${pick.year || ''}</span>
                </div>
            `;
        }).catch(() => {});

        // ============================================================
        // ROOM CARD TEASERS (real data from JSON)
        // ============================================================

        // Arc: random life chapter (use theme, which is the rich description)
        loadData('life_chapters.json').then(chapters => {
            const el = document.getElementById('teaser-arc');
            if (!el || !chapters || !chapters.length) return;
            const pick = chapters[Math.floor(Math.random() * chapters.length)];
            // Theme can be long — take just the first segment before the pipe
            const themeShort = (pick.theme || '').split('|')[0].trim();
            el.innerHTML = `<span class="teaser-label">'${String(pick.start_year).slice(2)}${pick.end_year && pick.end_year !== pick.start_year ? '–\'' + String(pick.end_year).slice(2) : ''}:</span> ${themeShort}`;
        }).catch(() => {});

        // Constellation: random person (data is an array with nested .person object)
        loadData('people_profiles.json').then(profiles => {
            const el = document.getElementById('teaser-constellation');
            if (!el || !Array.isArray(profiles) || !profiles.length) return;
            // Pick someone with a name and some importance
            const good = profiles.filter(p => p.person && p.person.name && p.person.importance_score > 10);
            const pick = good.length ? good[Math.floor(Math.random() * good.length)] : profiles[0];
            const person = pick.person;
            const rel = person.relation || person.category || '';
            const years = person.active_years || '';
            el.innerHTML = `<span class="teaser-label">${person.name}</span> &mdash; ${rel}${years ? ` (${years})` : ''}`;
        }).catch(() => {});

        // Records: random epic number
        loadData('epic_numbers.json').then(nums => {
            const el = document.getElementById('teaser-records');
            if (!el || !nums || !nums.length) return;
            const pick = nums[Math.floor(Math.random() * nums.length)];
            el.innerHTML = `<span class="teaser-number">${pick.value} ${pick.unit || ''}</span> <span class="teaser-label">${pick.stat}</span>`;
        }).catch(() => {});

        // Atlas: random destination
        loadData('travel.json').then(trips => {
            const el = document.getElementById('teaser-atlas');
            if (!el || !trips || !trips.length) return;
            const intl = trips.filter(t => t.scope === 'International');
            const pick = intl.length ? intl[Math.floor(Math.random() * intl.length)] : trips[Math.floor(Math.random() * trips.length)];
            el.innerHTML = `<span class="teaser-label">${pick.destination}</span> <span class="teaser-year">${pick.year}</span>`;
        }).catch(() => {});

        // Vault: random short quote
        loadData('quotes.json').then(quotes => {
            const el = document.getElementById('teaser-vault');
            if (!el || !quotes || !quotes.length) return;
            const short = quotes.filter(q => q.quote && q.quote.length > 10 && q.quote.length < 70);
            if (!short.length) return;
            const pick = short[Math.floor(Math.random() * short.length)];
            el.innerHTML = `&ldquo;${pick.quote}&rdquo; <span class="teaser-year">${pick.year || ''}</span>`;
        }).catch(() => {});

        // Dynasty: random active streak
        loadData('streaks.json').then(streaks => {
            const el = document.getElementById('teaser-dynasty');
            if (!el || !streaks || !streaks.length) return;
            const active = streaks.filter(s => s.still_active);
            const pick = active.length ? active[Math.floor(Math.random() * active.length)] : streaks[0];
            el.innerHTML = `<span class="teaser-number">${pick.length} yrs</span> <span class="teaser-label">${pick.description}</span>`;
        }).catch(() => {});

        // ============================================================
        // FRIEND VOICES
        // ============================================================
        loadData('lj_comments.json').then(comments => {
            const grid = document.getElementById('voices-grid');
            if (!grid || !comments || !comments.length) return;

            const best = comments
                .filter(c => c.excerpt && c.excerpt.length > 10 && c.excerpt.length < 140
                    && c.commenter !== 'spam commenters' && c.commenter !== 'Anonymous')
                .sort(() => Math.random() - 0.5)
                .slice(0, 6);

            grid.innerHTML = best.map(c => {
                const initials = (c.commenter || '?').split(/[\s()]+/).filter(Boolean).slice(0, 2).map(w => w[0].toUpperCase()).join('');
                return `
                    <div class="voice-card">
                        <div class="voice-card__userpic">${initials}</div>
                        <div class="voice-card__content">
                            <div class="voice-card__text">&ldquo;${c.excerpt}&rdquo;</div>
                            <div class="voice-card__meta">
                                <span class="voice-card__name">${c.commenter}</span>
                                <span class="voice-card__year">${c.year || ''}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }).catch(() => {});
    </script>
</body>
</html>
